@{
    Layout = null;
}
<!DOCTYPE html>
<html lang="en" ng-app="phmApp">
<head>
    <title>{{orgName}}</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
    <script src="~/Scripts/angular-cookies.min.js" type="text/javascript"></script>
    <script src="~/Scripts/angular-translate.min.js" type="text/javascript"></script>
    <script src="~/Scripts/angular-translate-loader-partial.js" type="text/javascript"></script>
    <script src="~/Scripts/translate-pluggable-loader.js" type="text/javascript"></script>
    <script type="text/javascript" src="~/Scripts/services/customServices.js"></script>
    <script type="text/javascript" src="~/Scripts/services/translationService.js"></script>
    <script src="~/Scripts/iframresizer.js" type="text/javascript"></script>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css" />
    <link href="~/Content/phm.css" rel="stylesheet" />
    <link href="~/Content/Grid.css" rel="stylesheet" />
    <link id="lnkCss" href="~/Content/bootstrap3.0.css?v=3" rel="stylesheet" type="text/css" />
    <link href="~/Content/loading-bar.css" rel="stylesheet" type="text/css" />
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link href="~/Content/partner.css" rel="stylesheet">
    <link href="~/Content/pagging.css" rel="stylesheet" />
    <script type="text/javascript">
        function popup(url) {
            var width = 700;
            var height = 700;
            var left = (screen.width - width) / 2;
            var top = (screen.height - height) / 2;
            var params = 'width=' + width + ', height=' + height;
            params += ', top=' + top + ', left=' + left;
            params += ', directories=no';
            params += ', location=no';
            params += ', menubar=no';
            params += ', resizable=no';
            params += ', scrollbars=yes';
            params += ', status=no';
            params += ', toolbar=no';
            newwin = window.open(url, 'windowname5', params);
            if (window.focus) { newwin.focus() }
            return false;
        }


    </script>
</head>
<body class="body-bg" style="background-color:#f9f9f9;">
    @using (Html.BeginForm())
    {
    @Html.AntiForgeryToken()

    }
    <div class="container surveypcontroller" ng-controller="surveyPController">
        <div id="dvLogo" style="float: left; border: none;display:none;">
            <img id="imgLogo" alt="" src="" style="float: left;" />
        </div>
        <img id="my_image" alt="" src="" style="display: none;" />
        <div style="float: right;">
            <div id="healttext" style="text-align: left;display:none;padding:60px 5px 0px 5px" class="surveyspan">
                <p>{{'widget1' | translate}}
                    <br />
                    <br />
                    {{'widget2' | translate}}
                    <br />
                    <br />
                    {{'widget3' | translate}}
                    <br />
                    <br />
                    {{'widget4' | translate}}
                </p>
            </div>
            <div class="dvSupport">
                <span style="font-size: 14px; margin-top: 15px;display: table; margin-right: 10px;">
                    <span id="spnFAQ">{{'faq' | translate}}</span>
                    <span ng-click="spnContactUs()" style="color: #0072c5;cursor: pointer;"  ng-if="OrgID != 606 && OrgID != 614 && OrgID != 615"> | {{'support' | translate}}</span>
                    <span ng-click="doNotSellMyInfo()" style="color: #0072c5;cursor: pointer;" ng-if="OrgID != 606"> | {{'doNotsellinfo' | translate}}</span>
                </span>
            </div>
            <div style="min-width: 400px; margin: 20px;">
                <div id="popup_box">
                    <!-- OUR PopupBox DIV-->
                    <div class="Form-cta u-cf Container-pullout u-paddingBS Form-cta--bar u-marginBM Form-cta--barTitle">
                        <h2 class="u-textSizeMed u-textBold u-extSizeMed u-textCenter Form-ctaLegend u-posAbsolute u-posCenter">{{'leaveMsg' | translate}}</h2>
                        <a id="popupBoxClose"></a>
                    </div>
                    <div>
                        <div style="width: 90%; height: 33px; padding: 0 10px 0 10px; margin: 0 auto; border: 1px solid #bec2c4; box-shadow: 0px 0px 0px 4px #f2f5f7">
                            <div style="padding: 3px; float: left; width: 100%;">
                                <img src="/Images/name-icon.png" style="float: left; padding-right:8px;" alt="" />
                                <input type="text" id="txtUsername" placeholder="{{'yourName'|translate}}" style="border: none; outline: 0px; width: 86%;" />
                            </div>
                        </div>
                    </div>
                    <br />
                    <div>
                        <div style="width: 90%; height: 33px; padding: 0 10px 0 10px; margin: 0 auto; border: 1px solid #bec2c4; box-shadow: 0px 0px 0px 4px #f2f5f7">
                            <div style="padding: 3px; float: left; width: 100%;">
                                <img src="/Images/email_icon.png" style="float: left; padding-top: 4px; padding-right:8px;" alt="" />
                                <input type="text" id="txtEamilAddress" placeholder="{{'emailaddress'|translate}}" style="border: none; outline: 0px; width: 86%;" />
                            </div>
                        </div>
                    </div>
                    <br />
                    <div>
                        <div style="width: 90%; height: 100px; padding: 0 10px 0 10px; margin: 0 auto; border: 1px solid #bec2c4; box-shadow: 0px 0px 0px 4px #f2f5f7">
                            <div style="padding: 3px; float: left; width: 100%;">
                                <img src="/Images/help-icon.png" style="float: left; padding-top: 4px; height: 29px; padding-right:8px;"
                                     alt="" />
                                <textarea rows="4" id="txtComment" placeholder="{{'Howcanwehelpyou'|translate}}" style="border: none; outline: 0px; width: 86%;"></textarea>
                            </div>
                        </div>
                    </div>
                    <br />
                    <div id="dvConfMsg" style="width: 90%; text-align: justify; display: none;">
                        <label style="color: Green">
                            {{'inquirySubmitted' | translate}}
                            {{'contactingUS' | translate}}                            
                        </label>
                    </div>
                    <br />
                    <div style="width: 96%; margin-bottom: 57px;">
                        <input type="button" id="btnSend" value="{{'Send' | translate}}" class="support-btnsend" />
                    </div>
                </div>
            </div>
        </div>
        <div class="tabwidget">

            <section class="hometab-section">
                <div class="hometab-container">
                    <ul class="nav nav-tabs nav-tabs-left">
                        <li class="active">
                            <a data-toggle="tab" href="#home" ng-click="home()">
                                <div class="tab-img-icon"><img src="~/Images/partner/icon-mysurvey.png" alt="" /> </div>
                                {{'surveys' | translate}}
                            </a>
                        </li>
                        <li>
                            <a data-toggle="tab" href="#menu1" ng-click="menu1()">
                                <div class="tab-img-icon"><img src="~/Images/partner/icon-profiles.png" alt="" /> </div>
                                {{'Profiles' | translate}}
                            </a>
                        </li>
                        <li>
                            <a data-toggle="tab" href="#menu2" ng-click="menu2()" ng-if="isShowRewards">
                                <div class="tab-img-icon"><img src="~/Images/partner/icon-rewards.png" alt="" /></div>
                                {{'Rewards' | translate}}
                            </a>
                        </li>
                        <li>
                            <a data-toggle="tab" href="#menu3" ng-click="menu3()">
                                <div class="tab-img-icon"><img src="~/Images/partner/icon-history.png" alt="" /></div>
                                {{'History' | translate}}
                            </a>
                        </li>
                    </ul>
                </div>
            </section>

            <div class="preloader" loader>
                <loading-directive>
                </loading-directive>
            </div>

            <script type="text/ng-template" id="PartnerProfileList">
                <div ng-repeat="obj in  profiles">
                    <div style="width: 100%;display:inline-block;" class="profile-checkboxlist" id="divpflist">
                        <div class="form-check">
                            <label class="form-check-label">
                                <input class="form-check-input" type="checkbox" ng-attr-id="{{obj.ProfileId + '_checkbox'}}" ng-checked="{{obj.IsChecked}}" />
                                <a ng-attr-title="{{obj.ProfileName}}" ng-click="GetProfile(obj.ProfileUrl)">{{obj.ProfileName | translate}}</a>
                            </label>
                        </div>

                    </div>
                </div>
            </script>
            <script type="text/ng-template" id="RetailGiftCard">
                <div ng-repeat="retCard in  lstRetailGiftCard">
                    <div class="reward_image_box">
                        <img ng-src="{{retCard.ImageURL}}"></img></br>
                        <span class="font">{{$index + 1 }}.{{retCard.Description}}  </span></br></br>
                        <span ng-repeat="rew in retCard.Reward" ng-init="parent = retCard" ng-include="'Reawards'" class="font" style="margin-top: 10px;"></span>
                    </div>
                </div>
            </script>
            <script type="text/ng-template" id="RestaurantGiftCard">
                <div ng-repeat="restCard in  lstRestaurantGiftCard">
                    <div class="reward_image_box">
                        <img ng-src="{{restCard.ImageURL}}"></img></br>
                        <span class="font">{{$index + 1 }}.{{restCard.Description}}  </span></br></br>
                        <span ng-repeat="rew in restCard.Reward" ng-init="parent = restCard" ng-include="'Reawards'" class="font" style="margin-top: 10px;"></span>
                    </div>
                </div>
            </script>
            <script type="text/ng-template" id="OnlineServices">
                <div ng-repeat="onlser in  lstOnlineServices">
                    <div class="reward_image_box">
                        <img ng-src="{{onlser.ImageURL}}"></img></br>
                        <span class="font">{{$index + 1 }}.{{onlser.Description}}  </span></br></br>
                        <span ng-repeat="rew in onlser.Reward" ng-init="parent = onlser" ng-include="'Reawards'" class="font" style="margin-top: 10px;"></span>
                    </div>
                </div>
            </script>
            <script type="text/ng-template" id="CharitableDonation">
                <div ng-repeat="charDona in  lstCharitableDonation">
                    <div class="reward_image_box">
                        <img ng-src="{{charDona.ImageURL}}"></img></br>
                        <span class="font">{{$index + 1 }}.{{charDona.Description}}  </span></br></br>
                        <span ng-repeat="rew in charDona.Reward" ng-init="parent = charDona" ng-include="'Reawards'" class="font" style="margin-top: 10px;"></span>
                    </div>
                </div>
            </script>
            <script type="text/ng-template" id="Reawards">
                <span ng-if="rew.IsVariable == 'FIXED_VALUE'">
                    <span ng-if="!rew.IsDisable">
                        <a href="#place" class="link reward_denom" ng-attr-id="{{rew.Sku+';'+(rew.Denomination)+';1'}}" ng-click="true &&  RewardClick(parent,rew,$event); $event.stopPropagation();"><span style="color: #7CADC2;">${{rew.Denomination}}</span></a>
                    </span>
                    <span ng-if="rew.IsDisable">
                        <a href="#place" class="link reward_denom" ng-attr-id="{{rew.Sku+';'+(rew.Denomination)+';1'}}" ng-click="false && RewardClick(parent,rew,$event); $event.stopPropagation();" style="background: #cacaca;" title="This reward is not applicable"><span style="color: #7CADC2;">${{rew.Denomination}}</span></a>
                    </span>
                </span>
                <span ng-if="rew.IsVariable == 'VARIABLE_VALUE'">
                    <span ng-repeat="lstRng in rew.LstRange" ng-init="parent = rew" ng-include="'RewardForRange'" class="font" style="margin-top: 10px;"></span>
                </span>

            </script>

            <script type="text/ng-template" id="RewardForRange">

                <span ng-if="!lstRng.IsDisable">
                    <a href="#place" class="link reward_denom" ng-attr-id="{{rew.Sku+';'+(lstRng.RewardValue)+';-1'}}" ng-click="true && RewardClick(parent,lstRng,$event); $event.stopPropagation();"><span style="color: #7CADC2;">${{lstRng.RewardValue}}</span></a>
                </span>
                <span ng-if="lstRng.IsDisable">
                    <a href="#place" class="link reward_denom" ng-attr-id="{{rew.Sku+';'+(lstRng.RewardValue)+';-1'}}" ng-click="false && RewardClick(parent,lstRng,$event); $event.stopPropagation();" style="background: #cacaca;" title="This reward is not applicable">
                        <span style="color: #7CADC2;">${{lstRng.RewardValue}}</span>
                    </a>
                </span>

            </script>
            <section class="hometab-content">
                <div class="tab-content">
                    <div id="home" class="tab-pane fade in active">
                        <div class="tab-pane-body">
                            <h3>{{'surveyList' | translate}}</h3>
                        </div>
                        <div class="widget widget-shadow table_mobile" id="widgetTable" style="width:100%;overflow-x: auto;">

                            <table class="table survey-table my-table table-history-grid">

                                <tr ng-if="!showSurveys">
                                    <td>
                                        {{'noSurveys' | translate}}
                                    </td>
                                </tr>
                                <thead ng-if="showSurveys" class="hide_mobile">
                                    <tr class="rew-tr">
                                        <th> {{'surveyName' | translate}}</th>
                                        <th> {{'surveyLength' | translate}}</th>
                                        <th> {{'reward' | translate}}</th>
                                        <th>  </th>
                                    </tr>
                                </thead>
                                <tr ng-class-even="'tr-bg'" ng-repeat="objSurvey in  surveys">
                                    <td align="left" scope="col"><a ng-attr-title="objSurvey.ProjectId" ng-bind="objSurvey.ProjectId"></a> - <a ng-attr-title="objSurvey.SurveyName" ng-bind="objSurvey.SurveyName"></a></td>
                                    <td align="left" scope="col"><span ng-bind="objSurvey.SurveyLength"></span> {{'mins' | translate}}</td>
                                    <td align="left" scope="col">
                                        <span class="surveyspanlm">
                                            <span ng-show="objSurvey.OrgId == 166 " ng-bind="objSurvey.RewardPoints"></span>

                                            <span ng-show="objSurvey.OrgId != 166 " ng-bind="objSurvey.RewardText"></span>
                                        </span>
                                    </td>
                                    <td align="left" scope="col">
                                        <span class="btn btn-primary btn-xs bold-btn" ng-click="GetSurvey(objSurvey.SurveyUrl)">{{'startSurvey' | translate}}</span>
                                    </td>
                                </tr>

                            </table>


                        </div>
                    </div>
                    <div id="menu1" class="tab-pane fade">
                        <div class="tab-pane-body">
                            <h3>{{'Profiles' | translate}}</h3>
                        </div>
                        <div class="widget widget-shadow" id="widgetTable">
                            <div style="width: 100%;" id="tbProfielListGet">
                                <div style="width: 100%; display: none;" id="dvProfileList">

                                    <div id="dvNoProfiles" ng-show="!profiles.length">
                                        <div>
                                            <label style="text-align: left; float: left; color: #1E91CB;">
                                                {{'noProfiles' | translate}}
                                            </label>
                                            <br />
                                        </div>
                                    </div>
                                    <div ng-show="profiles.length>0">
                                        <ng-include src="'PartnerProfileList'"></ng-include>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="menu3" class="tab-pane fade">
                        <div class="pull-right" style="margin:10px 5px 0px 0px">
                            <input type="button" class="btn btn-primary btn-xs bold-btn" style="height:30px;" value="{{'surveyHistory' | translate}}" ng-click="historyclick(2)" />
                            <input type="button" class="btn btn-primary btn-xs bold-btn" style="height:30px;" value="{{'RedeemptionHistory' | translate}}" ng-click="historyclick(1)" ng-if="isShowRewards" />
                        </div>
                        <div ng-if="reward">
                            <div class="tab-pane-body ">
                                <h3 class="grid-header">{{'surveyHistory' | translate}}</h3>
                            </div>
                            <div class="widget widget-shadow table_mobile" id="widgetTable">
                                <div id="tbSurveyHistory" style="width:100%;overflow-x: auto;">
                                    <div ng-if="surveyHistory.length==0">
                                        {{'noSurveyHistory' | translate}}
                                    </div>
                                    <table class="table survey-table my-table table-history-grid historyTable">

                                        <thead ng-if="surveyHistory.length>0" class="hide_mobile">
                                            <tr class="rew-tr">
                                                <th> {{'Date' | translate}}</th>
                                                <th> {{'Survey' | translate}} #</th>
                                                <th> {{'surveyName' | translate}}</th>
                                                <th> {{'rewardAmount' | translate}}</th>
                                                <th> {{'Status' | translate}}</th>
                                            </tr>
                                        </thead>
                                        <tr ng-class-even="'tr-bg'" ng-repeat="rhd in suvHisLst">
                                            <td align="left" scope="col">{{rhd.ClickDt}}</td>
                                            <td align="left" scope="col">{{rhd.SurveyId}}</td>
                                            <td align="left" scope="col">{{rhd.SurveyName}}</td>
                                            <td align="left" scope="col">{{rhd.SurveyReward}} </td>
                                            <td align="left" scope="col">{{rhd.SurveyStatus}} </td>
                                        </tr>


                                    </table>
                                    <section layout="row">
                                        <pagging-directive></pagging-directive>
                                    </section>
                                </div>
                            </div>
                        </div>
                        <div ng-controller="redeemController">
                            <div class="center-text border-3" ng-if="redeemHistLstgrid">
                                <div class="tab-pane-body">
                                    <h3 class="grid-header">{{'RedeemptionHistory' | translate}}</h3>
                                </div>
                                <div id="tbRedeemHistory" style="width:100%;overflow-x: auto;">
                                    <div ng-if="!redeemHistLst.length">
                                        {{'noRedeemHistory' | translate}}
                                    </div>
                                    <table class="table survey-table my-table table-history-grid redeemTable">

                                        <thead ng-if="redeemHistLst.length>0" class="hide_mobile">
                                            <tr class="rew-tr">
                                                <th> {{'Date' | translate}}</th>
                                                <th> {{'Amount' | translate}}</th>
                                                <th> {{'reward' | translate}}</th>
                                                <th> {{'Codes' | translate}}</th>
                                            </tr>
                                        </thead>
                                        <tr ng-class-even="'tr-bg'" ng-repeat="rhd in redeemHistLst">
                                            <td align="left" scope="col">{{rhd.CreateDt}}</td>
                                            <td align="left" scope="col">${{rhd.RedemptionAmount}}</td>
                                            <td align="left" scope="col">{{rhd.RedemptionType}}</td>
                                            <td align="left" scope="col">{{rhd.Descripion}} </td>
                                        </tr>


                                    </table>

                                    <section layout="row" ng-if="redeemHistLst.length>0">
                                        <pagging-directive></pagging-directive>
                                    </section>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="menu2" class="tab-pane fade">
                        <div class="tab-pane-body">
                            <h3>{{'Rewards' | translate}}</h3>
                        </div>
                        <div class="widget widget-shadow" id="widgetTable">
                            <div class="rewards-aside">
                                <div id="dvImageLoading">
                                </div>
                                <div class="p-l-0" style="padding:5px 20px 20px;">
                                    <div border="0" class="css-720">
                                        <div class="e-r-b-720 col-md-12">
                                            <b class="f-w">
                                                <span>{{'pendingEarnings' | translate}}:</span><span class="rew-userinfo"> ${{userRewardsInfo.PendingEarnings}} |</span>
                                            </b>
                                            <b class="f-w">
                                                <span>{{'totalEarnings' | translate}}:</span> <span class="rew-userinfo"> ${{userRewardsInfo.TotalEarnings}} |</span>
                                            </b><b class="f-w">
                                                <span>{{'totalRedeemptions' | translate}}:</span> <span class="rew-userinfo"> ${{userRewardsInfo.TotalRedemptions}} |</span>
                                            </b><b class="f-w">
                                                <span>{{'accountBalance' | translate}}:</span> <span class="rew-userinfo"> ${{userRewardsInfo.AccountBalance |number:2}}</span>
                                            </b>

                                        </div>
                                        <div style="padding:25px 0 0; display: table; width:100%;">

                                            <b style="font-size: medium">{{'availableRewards' | translate}}</b>

                                        </div>
                                        <div class="rew-dv-border">
                                        </div>
                                        <div style="padding-top: 10px;">
                                        </div>
                                        <div class="avialrewards-container" style="width: 100%">
                                            <div class="accordion" style="box-shadow: 0 0 0 #ccc;">
                                                <div ng-repeat="c in availableCards">
                                                    <label for="ac-1" ng-click="tabClick($index)" class="reward-label">{{c.cardName | translate}}</label>
                                                    <div class="article reward-accordian" ng-class="{accontent: tabIndex === $index }">
                                                        <ng-include src="c.templateName"></ng-include>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <p class="p-r rew-disc padding-left-right-20">
                                        <span>{{'Disclaimer'|translate}}: {{'widget4' | translate}} </span>
                                        <br />

                                    </p>
                                </div>

                            </div>

                        </div>

                    </div>
                </div>
            </section>
            <!-- /container -->
            <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
            <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
            @Scripts.Render("~/bundles/jquery")
            @Scripts.Render("~/bundles/bootstrap")
            <script type="text/javascript" src="https://code.jquery.com/jquery-1.7.2.min.js"></script>
            <script src="~/Scripts/services/customServices.js" type="text/javascript"></script>
            <script type="text/javascript" src="~/Scripts/pages/partner/phm.js?v=1"></script>
            <script type="text/javascript"  src="~/Scripts/services/translationService.js">
            </script>
        </div>
    </div>
</body>
</html>
